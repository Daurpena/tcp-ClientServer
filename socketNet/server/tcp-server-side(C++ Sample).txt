#include <iostream> 
#include "netwrk/Base.h"
#include "boost/asio.hpp"

using boost::asio::ip::tcp; 

int main()
{
     
     try
     {
          boost::asio::io_context io_context; 

          tcp::acceptor acceptor(io_context, tcp::endpoint(tcp::v4(), 1337));

          while(true)
          {
               std::cout << "Accepting connections on port 1337!\n";
               tcp::socket socket(io_context);
               acceptor.accept(socket);

               
               std::cout << "Client connected! Sending message\n";

               std::string message = "Hello Client!!!";
               boost::system::error_code error; 

               boost::asio::write(socket , boost::asio::buffer(message), error);
          }

     }
     catch(std::exception& e)
     {
          std::cerr << e.what() << '\n';
     }


     

     return 0;
}